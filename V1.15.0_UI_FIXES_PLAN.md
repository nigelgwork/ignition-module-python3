# Python 3 Integration Module - v1.15.0 UI Fixes Plan

**Created:** 2025-10-17
**Priority:** HIGH (User Feedback)
**Estimated Effort:** 16-24 hours
**Target Release:** 1-2 weeks after v1.14.0

---

## Executive Summary

After installing v1.14.0, the user identified 8 UI/UX issues that detract from the overall user experience. This document provides a comprehensive plan to address each issue with specific technical solutions.

### Issues Overview

1. ✅ Header shows v1.9.0 (should show current version)
2. ⚠️ Script browser tree doesn't look professional (needs Ignition Tag Browser styling)
3. ⚠️ Scroll bars are light colored in dark theme
4. ⚠️ Diagnostics/metrics not visible (v1.14.0 metrics backend exists, no UI)
5. ⚠️ Button text truncated/cut off
6. ⚠️ No indication of selected script in editor
7. ⚠️ Description pane has scrollbar when empty
8. ⚠️ Button sizes inconsistent, not aligned

---

## Issue 1: Header Shows v1.9.0

### Problem
**File:** `DesignerHook.java:183`

```java
ideFrame = new JFrame("Python 3 IDE v1.9.0 - Enhanced");
```

The window title is hardcoded to v1.9.0, but the actual version is v1.14.0.

### Root Cause
Version number is hardcoded instead of being read from `version.properties`.

### Solution

**Implementation (30 minutes):**

1. **Read version from version.properties:**

```java
// DesignerHook.java

private static String getModuleVersion() {
    try (InputStream is = DesignerHook.class.getResourceAsStream("/version.properties")) {
        if (is != null) {
            Properties props = new Properties();
            props.load(is);
            String major = props.getProperty("version.major", "1");
            String minor = props.getProperty("version.minor", "0");
            String patch = props.getProperty("version.patch", "0");
            return major + "." + minor + "." + patch;
        }
    } catch (IOException e) {
        // Fall back to hardcoded version
    }
    return "1.14.0";
}

private void openPython3IDE() {
    // ...
    String version = getModuleVersion();
    ideFrame = new JFrame("Python 3 IDE v" + version);
    // ...
}
```

2. **Copy version.properties to common/src/main/resources:**

```bash
cp python3-integration/version.properties python3-integration/common/src/main/resources/
```

**Testing:**
- Verify window title shows "Python 3 IDE v1.14.0"
- Verify version updates automatically when version.properties changes

---

## Issue 2: Script Browser Tree - Not Professional

### Problem
**File:** `ScriptTreeCellRenderer.java`

User feedback: "Please can you try a different approach to the script browser tree - Its just not right. Please take a look at how Ignitions Tag Browser works, I would like the text and icons to be similar"

Current implementation:
- Custom painted icons (16x16 px)
- Yellow folder icons
- Python-themed script icon
- Font sizes: Folders=14pt Bold, Scripts=13pt Regular

**User wants:**
- Ignition Tag Browser-style appearance
- Professional, clean look
- Better visual hierarchy

### Root Cause
Custom icon painting doesn't match Ignition's native UI design language.

### Solution

**Implementation (4-6 hours):**

#### Option 1: Use Ignition's Default Tree Icons (RECOMMENDED)

```java
// ScriptTreeCellRenderer.java

public class ScriptTreeCellRenderer extends DefaultTreeCellRenderer {

    // Use Ignition's default icons instead of custom painting
    private static final Icon FOLDER_ICON = UIManager.getIcon("Tree.closedIcon");
    private static final Icon FOLDER_OPEN_ICON = UIManager.getIcon("Tree.openIcon");
    private static final Icon SCRIPT_ICON = UIManager.getIcon("Tree.leafIcon");

    @Override
    public Component getTreeCellRendererComponent(
            JTree tree, Object value, boolean selected, boolean expanded,
            boolean leaf, int row, boolean hasFocus) {

        super.getTreeCellRendererComponent(tree, value, selected, expanded, leaf, row, hasFocus);

        // Ignition Tag Browser-style colors
        if (selected) {
            setBackground(new Color(51, 153, 255));  // Ignition blue selection
            setForeground(Color.WHITE);
            setOpaque(true);
        } else {
            setBackground(tree.getBackground());
            setForeground(tree.getForeground());
            setOpaque(false);
        }

        // Use consistent font size (12pt for all items)
        setFont(new Font("SansSerif", Font.PLAIN, 12));

        if (value instanceof ScriptTreeNode) {
            ScriptTreeNode node = (ScriptTreeNode) value;

            if (node.isFolder()) {
                setIcon(expanded ? FOLDER_OPEN_ICON : FOLDER_ICON);
                setFont(new Font("SansSerif", Font.BOLD, 12));  // Bold for folders
            } else if (node.isScript()) {
                setIcon(SCRIPT_ICON);
            }
        }

        // Consistent padding - Tag Browser style
        setBorder(BorderFactory.createEmptyBorder(3, 3, 3, 3));
        setIconTextGap(6);  // Tighter gap between icon and text

        return this;
    }
}
```

#### Option 2: Load Ignition-style Icons from Resources

If UIManager icons don't look good, create icon resources that match Ignition's style:

```java
// ScriptTreeCellRenderer.java

private static final Icon FOLDER_ICON = loadIcon("/icons/folder_closed.png");
private static final Icon FOLDER_OPEN_ICON = loadIcon("/icons/folder_open.png");
private static final Icon SCRIPT_ICON = loadIcon("/icons/python_script.png");

private static Icon loadIcon(String path) {
    try {
        URL url = ScriptTreeCellRenderer.class.getResource(path);
        if (url != null) {
            ImageIcon icon = new ImageIcon(url);
            // Scale to 16x16 if needed
            Image img = icon.getImage().getScaledInstance(16, 16, Image.SCALE_SMOOTH);
            return new ImageIcon(img);
        }
    } catch (Exception e) {
        // Fall back to default icon
    }
    return UIManager.getIcon("Tree.leafIcon");
}
```

**Icon Resources:**
- Download/create icons matching Ignition's style (16x16 PNG):
  - `folder_closed.png` - Gray folder icon (RGB: 180, 180, 180)
  - `folder_open.png` - Gray open folder icon
  - `python_script.png` - Simple document icon with "py" badge

#### Tree Styling Updates

```java
// Python3IDE_v1_9.java - createSidebar() method

private JPanel createSidebar() {
    // ...

    // Tag Browser-style tree configuration
    scriptTree.setRootVisible(true);
    scriptTree.setShowsRootHandles(true);
    scriptTree.setRowHeight(20);  // Consistent 20px rows (Tag Browser standard)
    scriptTree.setToggleClickCount(1);  // Single-click to expand (like Tag Browser)

    // Remove border lines between cells
    scriptTree.putClientProperty("JTree.lineStyle", "None");

    // Ignition-style colors
    scriptTree.setBackground(new Color(250, 250, 250));  // Light gray background
    scriptTree.setForeground(new Color(60, 60, 60));     // Dark gray text
    scriptTree.setFont(new Font("SansSerif", Font.PLAIN, 12));

    // Selection colors (Ignition blue)
    UIManager.put("Tree.selectionBackground", new Color(51, 153, 255));
    UIManager.put("Tree.selectionForeground", Color.WHITE);
    UIManager.put("Tree.selectionBorderColor", new Color(51, 153, 255));

    // ...
}
```

**Testing:**
- Compare side-by-side with Ignition Tag Browser
- Verify folder/script icons look clean and professional
- Verify selection highlighting matches Ignition's blue
- Test expand/collapse animations
- Verify font sizes are consistent (12pt)

---

## Issue 3: Scroll Bars Light Colored in Dark Theme

### Problem
**File:** `Python3IDE_v1_9.java:1958-1983`

Methods `applyDarkScrollbarTheme()` and `applyLightScrollbarTheme()` exist but scrollbars remain light colored in dark theme.

Current code:
```java
private void applyDarkScrollbarTheme() {
    UIManager.put("ScrollBar.track", ModernTheme.BACKGROUND_DARK);
    UIManager.put("ScrollBar.thumb", ModernTheme.BORDER_DEFAULT);
    // ...
}
```

### Root Cause
UIManager properties are set globally but may not be applied to existing scrollbars. Swing components cache UI delegates and don't automatically update when UIManager properties change.

### Solution

**Implementation (1-2 hours):**

```java
// Python3IDE_v1_9.java

private void applyDarkScrollbarTheme() {
    // Set UIManager properties
    UIManager.put("ScrollBar.track", ModernTheme.BACKGROUND_DARK);
    UIManager.put("ScrollBar.thumb", ModernTheme.BORDER_DEFAULT);
    UIManager.put("ScrollBar.thumbDarkShadow", ModernTheme.BACKGROUND_DARKER);
    UIManager.put("ScrollBar.thumbHighlight", ModernTheme.FOREGROUND_SECONDARY);
    UIManager.put("ScrollBar.thumbShadow", ModernTheme.BACKGROUND_DARKER);
    UIManager.put("ScrollBar.background", ModernTheme.BACKGROUND_DARK);
    UIManager.put("ScrollBar.foreground", ModernTheme.FOREGROUND_PRIMARY);
    UIManager.put("ScrollPane.background", ModernTheme.BACKGROUND_DARK);
    UIManager.put("Viewport.background", ModernTheme.BACKGROUND_DARK);

    // CRITICAL: Force update of all scroll panes
    updateScrollPaneTheme(this);
}

private void applyLightScrollbarTheme() {
    UIManager.put("ScrollBar.track", Color.WHITE);
    UIManager.put("ScrollBar.thumb", new Color(200, 200, 200));
    UIManager.put("ScrollBar.thumbDarkShadow", new Color(150, 150, 150));
    UIManager.put("ScrollBar.thumbHighlight", new Color(230, 230, 230));
    UIManager.put("ScrollBar.thumbShadow", new Color(180, 180, 180));
    UIManager.put("ScrollBar.background", Color.WHITE);
    UIManager.put("ScrollBar.foreground", Color.BLACK);
    UIManager.put("ScrollPane.background", Color.WHITE);
    UIManager.put("Viewport.background", Color.WHITE);

    // CRITICAL: Force update of all scroll panes
    updateScrollPaneTheme(this);
}

/**
 * Recursively updates all JScrollPane components to apply new theme.
 * This forces scrollbars to repaint with new UIManager settings.
 */
private void updateScrollPaneTheme(Component comp) {
    if (comp instanceof JScrollPane) {
        JScrollPane scrollPane = (JScrollPane) comp;

        // Update scrollbar UI delegates to pick up new UIManager properties
        JScrollBar verticalBar = scrollPane.getVerticalScrollBar();
        JScrollBar horizontalBar = scrollPane.getHorizontalScrollBar();

        if (verticalBar != null) {
            verticalBar.setUI(new javax.swing.plaf.basic.BasicScrollBarUI() {
                @Override
                protected void configureScrollBarColors() {
                    super.configureScrollBarColors();
                    thumbColor = (Color) UIManager.get("ScrollBar.thumb");
                    trackColor = (Color) UIManager.get("ScrollBar.track");
                }
            });
        }

        if (horizontalBar != null) {
            horizontalBar.setUI(new javax.swing.plaf.basic.BasicScrollBarUI() {
                @Override
                protected void configureScrollBarColors() {
                    super.configureScrollBarColors();
                    thumbColor = (Color) UIManager.get("ScrollBar.thumb");
                    trackColor = (Color) UIManager.get("ScrollBar.track");
                }
            });
        }

        scrollPane.revalidate();
        scrollPane.repaint();
    }

    // Recurse into container children
    if (comp instanceof Container) {
        for (Component child : ((Container) comp).getComponents()) {
            updateScrollPaneTheme(child);
        }
    }
}
```

**Alternative Solution (if BasicScrollBarUI doesn't work):**

```java
/**
 * Creates a dark-themed scrollbar UI factory.
 */
private static class DarkScrollBarUI extends BasicScrollBarUI {
    @Override
    protected void configureScrollBarColors() {
        thumbColor = ModernTheme.BORDER_DEFAULT;
        thumbDarkShadowColor = ModernTheme.BACKGROUND_DARKER;
        thumbHighlightColor = ModernTheme.FOREGROUND_SECONDARY;
        thumbLightShadowColor = ModernTheme.BACKGROUND_DARKER;
        trackColor = ModernTheme.BACKGROUND_DARK;
        trackHighlightColor = ModernTheme.BACKGROUND_DARKER;
    }

    @Override
    protected JButton createDecreaseButton(int orientation) {
        JButton button = super.createDecreaseButton(orientation);
        button.setBackground(ModernTheme.BACKGROUND_DARK);
        button.setForeground(ModernTheme.FOREGROUND_PRIMARY);
        return button;
    }

    @Override
    protected JButton createIncreaseButton(int orientation) {
        JButton button = super.createIncreaseButton(orientation);
        button.setBackground(ModernTheme.BACKGROUND_DARK);
        button.setForeground(ModernTheme.FOREGROUND_PRIMARY);
        return button;
    }
}

// In applyDarkScrollbarTheme():
scrollPane.getVerticalScrollBar().setUI(new DarkScrollBarUI());
scrollPane.getHorizontalScrollBar().setUI(new DarkScrollBarUI());
```

**Testing:**
- Switch to dark theme, verify all scrollbars are dark colored
- Switch to light theme, verify all scrollbars are light colored
- Test scrollbars in:
  - Code editor (RTextScrollPane)
  - Output area (JScrollPane)
  - Error area (JScrollPane)
  - Script tree (JScrollPane)
  - Metadata panel description (JScrollPane)

---

## Issue 4: Can't See Diagnostics

### Problem
v1.14.0 implemented `Python3MetricsCollector.java` and REST endpoints (`/api/v1/metrics`, `/api/v1/gateway-impact`) but there's no UI panel to display this data in the Designer IDE.

**User quote:** "I can't see any of the diagnostics that you works on. Where is that located?"

### Root Cause
Backend metrics collection exists, but Designer UI was not updated to display it.

### Solution

**Implementation (3-4 hours):**

#### Step 1: Create DiagnosticsPanel Component

```java
// File: DiagnosticsPanel.java (NEW)

package com.inductiveautomation.ignition.examples.python3.designer;

import javax.swing.*;
import java.awt.*;
import java.util.Map;

/**
 * Panel displaying performance diagnostics and Gateway impact metrics.
 * Shows real-time data from Python3MetricsCollector.
 */
public class DiagnosticsPanel extends JPanel {

    private final JLabel totalExecutionsLabel;
    private final JLabel successRateLabel;
    private final JLabel avgExecutionTimeLabel;
    private final JLabel poolUtilizationLabel;
    private final JLabel gatewayImpactLabel;
    private final JProgressBar healthScoreBar;

    public DiagnosticsPanel() {
        setLayout(new BorderLayout(5, 5));
        setBorder(BorderFactory.createCompoundBorder(
                new TitledBorder(BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT),
                        "Performance Diagnostics",
                        TitledBorder.DEFAULT_JUSTIFICATION,
                        TitledBorder.DEFAULT_POSITION,
                        ModernTheme.FONT_REGULAR,
                        ModernTheme.FOREGROUND_PRIMARY),
                BorderFactory.createEmptyBorder(5, 5, 5, 5)
        ));
        setBackground(ModernTheme.PANEL_BACKGROUND);
        setPreferredSize(new Dimension(300, 200));

        // Create labels
        totalExecutionsLabel = createValueLabel("0");
        successRateLabel = createValueLabel("0.0%");
        avgExecutionTimeLabel = createValueLabel("0 ms");
        poolUtilizationLabel = createValueLabel("0%");
        gatewayImpactLabel = createValueLabel("LOW");

        // Health score bar
        healthScoreBar = new JProgressBar(0, 100);
        healthScoreBar.setStringPainted(true);
        healthScoreBar.setForeground(ModernTheme.SUCCESS);

        // Layout
        JPanel metricsPanel = new JPanel(new GridLayout(6, 2, 5, 3));
        metricsPanel.setBackground(ModernTheme.PANEL_BACKGROUND);

        metricsPanel.add(createKeyLabel("Total Executions:"));
        metricsPanel.add(totalExecutionsLabel);

        metricsPanel.add(createKeyLabel("Success Rate:"));
        metricsPanel.add(successRateLabel);

        metricsPanel.add(createKeyLabel("Avg Execution:"));
        metricsPanel.add(avgExecutionTimeLabel);

        metricsPanel.add(createKeyLabel("Pool Utilization:"));
        metricsPanel.add(poolUtilizationLabel);

        metricsPanel.add(createKeyLabel("Gateway Impact:"));
        metricsPanel.add(gatewayImpactLabel);

        metricsPanel.add(createKeyLabel("Health Score:"));
        metricsPanel.add(healthScoreBar);

        add(metricsPanel, BorderLayout.CENTER);
    }

    /**
     * Updates diagnostics from REST API response.
     */
    public void updateMetrics(Map<String, Object> metrics) {
        if (metrics == null) {
            return;
        }

        // Parse metrics response
        Number totalExecs = (Number) metrics.get("totalExecutions");
        Number successRate = (Number) metrics.get("successRate");
        Number avgTime = (Number) metrics.get("averageExecutionTimeMs");
        Number poolUtil = (Number) metrics.get("poolUtilization");
        String impact = (String) metrics.get("impactLevel");
        Number healthScore = (Number) metrics.get("healthScore");

        // Update UI
        if (totalExecs != null) {
            totalExecutionsLabel.setText(String.format("%,d", totalExecs.longValue()));
        }

        if (successRate != null) {
            double rate = successRate.doubleValue();
            successRateLabel.setText(String.format("%.1f%%", rate));

            // Color code based on success rate
            if (rate >= 95) {
                successRateLabel.setForeground(ModernTheme.SUCCESS);
            } else if (rate >= 80) {
                successRateLabel.setForeground(ModernTheme.WARNING);
            } else {
                successRateLabel.setForeground(ModernTheme.ERROR);
            }
        }

        if (avgTime != null) {
            avgExecutionTimeLabel.setText(String.format("%d ms", avgTime.longValue()));
        }

        if (poolUtil != null) {
            poolUtilizationLabel.setText(String.format("%.0f%%", poolUtil.doubleValue()));
        }

        if (impact != null) {
            gatewayImpactLabel.setText(impact);

            // Color code impact level
            switch (impact.toUpperCase()) {
                case "LOW":
                    gatewayImpactLabel.setForeground(ModernTheme.SUCCESS);
                    break;
                case "MEDIUM":
                case "MODERATE":
                    gatewayImpactLabel.setForeground(ModernTheme.WARNING);
                    break;
                case "HIGH":
                case "CRITICAL":
                    gatewayImpactLabel.setForeground(ModernTheme.ERROR);
                    break;
                default:
                    gatewayImpactLabel.setForeground(ModernTheme.FOREGROUND_PRIMARY);
            }
        }

        if (healthScore != null) {
            int score = healthScore.intValue();
            healthScoreBar.setValue(score);
            healthScoreBar.setString(score + "/100");

            // Color code health score
            if (score >= 80) {
                healthScoreBar.setForeground(ModernTheme.SUCCESS);
            } else if (score >= 60) {
                healthScoreBar.setForeground(ModernTheme.WARNING);
            } else {
                healthScoreBar.setForeground(ModernTheme.ERROR);
            }
        }
    }

    /**
     * Clears all metrics.
     */
    public void clear() {
        totalExecutionsLabel.setText("—");
        successRateLabel.setText("—");
        avgExecutionTimeLabel.setText("—");
        poolUtilizationLabel.setText("—");
        gatewayImpactLabel.setText("—");
        healthScoreBar.setValue(0);
        healthScoreBar.setString("—");
    }

    private JLabel createKeyLabel(String text) {
        JLabel label = new JLabel(text);
        label.setFont(ModernTheme.withSize(ModernTheme.FONT_BOLD, 11));
        label.setForeground(ModernTheme.FOREGROUND_SECONDARY);
        return label;
    }

    private JLabel createValueLabel(String text) {
        JLabel label = new JLabel(text);
        label.setFont(ModernTheme.withSize(ModernTheme.FONT_REGULAR, 11));
        label.setForeground(ModernTheme.FOREGROUND_PRIMARY);
        return label;
    }
}
```

#### Step 2: Add REST Client Method

```java
// Python3RestClient.java

/**
 * Gets performance metrics from Gateway.
 */
public Map<String, Object> getMetrics() throws Exception {
    String url = gatewayUrl + "/data/python3integration/api/v1/metrics";

    HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
    conn.setRequestMethod("GET");
    conn.setRequestProperty("Content-Type", "application/json");
    conn.setConnectTimeout(5000);
    conn.setReadTimeout(5000);

    int responseCode = conn.getResponseCode();

    if (responseCode == 200) {
        try (BufferedReader reader = new BufferedReader(
                new InputStreamReader(conn.getInputStream(), StandardCharsets.UTF_8))) {

            StringBuilder response = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                response.append(line);
            }

            return gson.fromJson(response.toString(), Map.class);
        }
    } else {
        throw new Exception("Failed to get metrics: HTTP " + responseCode);
    }
}

/**
 * Gets Gateway impact assessment.
 */
public Map<String, Object> getGatewayImpact() throws Exception {
    String url = gatewayUrl + "/data/python3integration/api/v1/gateway-impact";

    HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();
    conn.setRequestMethod("GET");
    conn.setRequestProperty("Content-Type", "application/json");
    conn.setConnectTimeout(5000);
    conn.setReadTimeout(5000);

    int responseCode = conn.getResponseCode();

    if (responseCode == 200) {
        try (BufferedReader reader = new BufferedReader(
                new InputStreamReader(conn.getInputStream(), StandardCharsets.UTF_8))) {

            StringBuilder response = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                response.append(line);
            }

            return gson.fromJson(response.toString(), Map.class);
        }
    } else {
        throw new Exception("Failed to get Gateway impact: HTTP " + responseCode);
    }
}
```

#### Step 3: Integrate into Python3IDE_v1_9

```java
// Python3IDE_v1_9.java

private DiagnosticsPanel diagnosticsPanel;
private Timer metricsRefreshTimer;

private void initComponents() {
    // ... existing code ...

    // Diagnostics panel
    diagnosticsPanel = new DiagnosticsPanel();
}

private JPanel createSidebar() {
    JPanel sidebar = new JPanel(new BorderLayout(5, 5));
    sidebar.setPreferredSize(new Dimension(250, 600));
    sidebar.setBackground(ModernTheme.BACKGROUND_DARK);

    // Script tree
    JScrollPane treeScroll = new JScrollPane(scriptTree);
    // ... existing tree setup ...

    // Toolbar above tree
    JPanel treeToolbar = new JPanel(new FlowLayout(FlowLayout.LEFT, 3, 2));
    // ... existing toolbar buttons ...

    JPanel treePanel = new JPanel(new BorderLayout());
    treePanel.setBackground(ModernTheme.BACKGROUND_DARK);
    treePanel.add(treeToolbar, BorderLayout.NORTH);
    treePanel.add(treeScroll, BorderLayout.CENTER);

    // Split tree, metadata, and diagnostics vertically
    JSplitPane upperSplit = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
    upperSplit.setTopComponent(treePanel);
    upperSplit.setBottomComponent(metadataPanel);
    upperSplit.setDividerLocation(300);
    upperSplit.setBackground(ModernTheme.BACKGROUND_DARK);
    upperSplit.setBorder(null);
    upperSplit.setDividerSize(8);

    JSplitPane lowerSplit = new JSplitPane(JSplitPane.VERTICAL_SPLIT);
    lowerSplit.setTopComponent(upperSplit);
    lowerSplit.setBottomComponent(diagnosticsPanel);
    lowerSplit.setDividerLocation(500);
    lowerSplit.setBackground(ModernTheme.BACKGROUND_DARK);
    lowerSplit.setBorder(null);
    lowerSplit.setDividerSize(8);

    sidebar.add(lowerSplit, BorderLayout.CENTER);

    return sidebar;
}

private void connectToGateway() {
    // ... existing connection code ...

    // Start metrics refresh timer (every 5 seconds)
    if (metricsRefreshTimer != null) {
        metricsRefreshTimer.stop();
    }

    metricsRefreshTimer = new Timer(5000, e -> refreshMetrics());
    metricsRefreshTimer.start();
}

/**
 * Refreshes performance metrics and diagnostics.
 */
private void refreshMetrics() {
    if (restClient == null) {
        return;
    }

    SwingWorker<Map<String, Object>, Void> worker = new SwingWorker<Map<String, Object>, Void>() {
        @Override
        protected Map<String, Object> doInBackground() throws Exception {
            return restClient.getMetrics();
        }

        @Override
        protected void done() {
            try {
                Map<String, Object> metrics = get();
                diagnosticsPanel.updateMetrics(metrics);
            } catch (Exception e) {
                LOGGER.warn("Failed to refresh metrics", e);
                diagnosticsPanel.clear();
            }
        }
    };

    worker.execute();
}
```

**Testing:**
- Verify Diagnostics panel appears in sidebar
- Execute Python code and verify metrics update
- Verify metrics refresh every 5 seconds
- Verify health score bar color changes (green/yellow/red)
- Verify Gateway impact label color changes based on level
- Test with disconnected Gateway (metrics should show "—")

---

## Issue 5: Button Text Truncated/Cut Off

### Problem
**User quote:** "Please review buttons and icons so that the text spaces nicely and is not cut off. There is plenty of space on the page for this."

Some buttons have text that doesn't fit, causing truncation.

### Root Cause
- Fixed button sizes in ModernButton class
- Insufficient horizontal padding
- Font sizes too large for button size

### Solution

**Implementation (1-2 hours):**

```java
// ModernButton.java (if exists) or update inline in Python3IDE_v1_9.java

/**
 * Creates a modern button with automatic sizing based on text.
 */
private static JButton createModernButton(String text, Color bgColor, Color fgColor) {
    JButton button = new JButton(text);
    button.setFont(ModernTheme.withSize(ModernTheme.FONT_REGULAR, 11));
    button.setBackground(bgColor);
    button.setForeground(fgColor);
    button.setFocusPainted(false);
    button.setBorderPainted(true);
    button.setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createLineBorder(bgColor.darker()),
            BorderFactory.createEmptyBorder(5, 15, 5, 15)  // Generous padding
    ));
    button.setCursor(new Cursor(Cursor.HAND_CURSOR));

    // Auto-size based on text
    button.setPreferredSize(null);  // Let layout manager calculate size
    button.setMinimumSize(new Dimension(80, 28));  // Minimum 80px wide

    return button;
}

public static JButton createPrimary(String text) {
    return createModernButton(text, ModernTheme.ACCENT_PRIMARY, Color.WHITE);
}

public static JButton createDefault(String text) {
    return createModernButton(text, ModernTheme.BACKGROUND_DARK, ModernTheme.FOREGROUND_PRIMARY);
}

public static JButton createSuccess(String text) {
    return createModernButton(text, ModernTheme.SUCCESS, Color.WHITE);
}

public static JButton createSmall(String text) {
    JButton button = createDefault(text);
    button.setFont(ModernTheme.withSize(ModernTheme.FONT_REGULAR, 10));
    button.setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT),
            BorderFactory.createEmptyBorder(3, 10, 3, 10)  // Smaller padding
    ));
    button.setMinimumSize(new Dimension(60, 24));
    return button;
}
```

**Update Button Creation:**

```java
// Python3IDE_v1_9.java - initComponents()

// Old (fixed size):
// executeButton = ModernButton.createPrimary("Execute (Ctrl+Enter)");

// New (auto-sized):
executeButton = ModernButton.createPrimary("Execute (Ctrl+Enter)");
executeButton.setToolTipText("Execute Python code (Ctrl+Enter)");
// Let button size automatically based on text

clearButton = ModernButton.createDefault("Clear");
clearButton.setToolTipText("Clear output and errors");

saveButton = ModernButton.createSuccess("Save (Ctrl+S)");
saveButton.setToolTipText("Save current script (Ctrl+S)");

saveAsButton = ModernButton.createDefault("Save As...");
exportButton = ModernButton.createDefault("Export...");
importButton = ModernButton.createDefault("Import...");
```

**Testing:**
- Verify all button text is fully visible
- Verify buttons don't have excessive empty space
- Test on different screen resolutions
- Verify tooltips appear on hover
- Verify buttons resize appropriately with theme changes

---

## Issue 6: No Indication of Selected Script

### Problem
**User quote:** "There needs to be an indication of what script is selected in the main code editor pane. When the IDE opens it always start with a past script showing but its not actually selected a script."

When a script is loaded into the editor, there's no visual indicator showing which script is currently being edited.

### Root Cause
`currentScript` variable tracks loaded script, but no UI component displays it.

### Solution

**Implementation (1-2 hours):**

#### Option 1: Add Header Label Above Editor (RECOMMENDED)

```java
// Python3IDE_v1_9.java

private JLabel currentScriptLabel;

private void initComponents() {
    // ... existing code ...

    // Current script indicator
    currentScriptLabel = new JLabel("No script loaded");
    currentScriptLabel.setFont(ModernTheme.withSize(ModernTheme.FONT_BOLD, 13));
    currentScriptLabel.setForeground(ModernTheme.ACCENT_PRIMARY);
    currentScriptLabel.setIcon(UIManager.getIcon("Tree.leafIcon"));
    currentScriptLabel.setIconTextGap(8);
    currentScriptLabel.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));
    currentScriptLabel.setOpaque(true);
    currentScriptLabel.setBackground(ModernTheme.PANEL_BACKGROUND);
}

private JPanel createEditorPanel() {
    JPanel panel = new JPanel(new BorderLayout(5, 5));
    panel.setBackground(ModernTheme.BACKGROUND_DARK);

    // Current script header
    JPanel headerPanel = new JPanel(new BorderLayout());
    headerPanel.setBackground(ModernTheme.PANEL_BACKGROUND);
    headerPanel.setBorder(BorderFactory.createMatteBorder(0, 0, 2, 0, ModernTheme.BORDER_DEFAULT));
    headerPanel.add(currentScriptLabel, BorderLayout.WEST);

    panel.add(headerPanel, BorderLayout.NORTH);

    // Editor with line numbers
    RTextScrollPane editorScroll = new RTextScrollPane(codeEditor);
    editorScroll.setLineNumbersEnabled(true);

    JPanel editorContainer = new JPanel(new BorderLayout());
    editorContainer.setBackground(ModernTheme.PANEL_BACKGROUND);
    editorContainer.setBorder(BorderFactory.createCompoundBorder(
            new TitledBorder(BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT),
                    "Python 3 Code Editor",
                    TitledBorder.DEFAULT_JUSTIFICATION,
                    TitledBorder.DEFAULT_POSITION,
                    ModernTheme.FONT_REGULAR,
                    ModernTheme.FOREGROUND_PRIMARY),
            BorderFactory.createEmptyBorder(5, 5, 5, 5)
    ));
    editorContainer.add(editorScroll, BorderLayout.CENTER);

    panel.add(editorContainer, BorderLayout.CENTER);

    // ... rest of method ...
}

/**
 * Updates the current script indicator.
 */
private void updateCurrentScriptIndicator() {
    if (currentScript != null && currentScript.getName() != null) {
        String displayName = currentScript.getName();

        // Add folder path if exists
        if (currentScript.getFolderPath() != null && !currentScript.getFolderPath().isEmpty()) {
            displayName = currentScript.getFolderPath() + "/" + displayName;
        }

        // Add dirty indicator if unsaved changes
        if (changesTracker.isDirty()) {
            displayName += " *";
        }

        currentScriptLabel.setText(displayName);
        currentScriptLabel.setForeground(ModernTheme.ACCENT_PRIMARY);
        currentScriptLabel.setIcon(UIManager.getIcon("Tree.leafIcon"));
    } else {
        currentScriptLabel.setText("Untitled Script");
        currentScriptLabel.setForeground(ModernTheme.FOREGROUND_SECONDARY);
        currentScriptLabel.setIcon(null);
    }
}

// Update loadScript() to call indicator update
private void loadScript(String name) {
    // ... existing code ...

    @Override
    protected void done() {
        try {
            SavedScript script = get();
            changesTracker.loadContent(script.getCode());
            currentScript = convertToMetadata(script);
            updateCurrentScriptIndicator();  // ADD THIS LINE
            setStatus("Loaded: " + script.getName(), new Color(0, 128, 0));
        } catch (Exception e) {
            // ... error handling ...
        }
    }
}

// Update createNewScript() to call indicator update
private void createNewScript() {
    // ... existing code ...

    changesTracker.loadContent("# New Python Script\n\n");
    currentScript = null;
    updateCurrentScriptIndicator();  // ADD THIS LINE
    metadataPanel.clear();
    setStatus("New script", Color.BLUE);
}

// Update onDirtyStateChanged() to call indicator update
private void onDirtyStateChanged(boolean isDirty) {
    updateCurrentScriptIndicator();  // ADD THIS LINE
    setStatus(isDirty ? "Unsaved changes" : "All changes saved",
              isDirty ? Color.ORANGE : new Color(0, 128, 0));
}
```

#### Option 2: Update Editor Title Border

```java
// Alternative approach - dynamically update editor container title

private TitledBorder editorTitleBorder;

private JPanel createEditorPanel() {
    // ...

    editorTitleBorder = new TitledBorder(
            BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT),
            "Python 3 Code Editor",
            TitledBorder.DEFAULT_JUSTIFICATION,
            TitledBorder.DEFAULT_POSITION,
            ModernTheme.FONT_REGULAR,
            ModernTheme.FOREGROUND_PRIMARY);

    editorContainer.setBorder(BorderFactory.createCompoundBorder(
            editorTitleBorder,
            BorderFactory.createEmptyBorder(5, 5, 5, 5)
    ));

    // ...
}

private void updateCurrentScriptIndicator() {
    String title;
    if (currentScript != null && currentScript.getName() != null) {
        title = "Python 3 Code Editor - " + currentScript.getName();
        if (changesTracker.isDirty()) {
            title += " *";
        }
    } else {
        title = "Python 3 Code Editor - Untitled";
    }

    editorTitleBorder.setTitle(title);
    repaint();
}
```

**Testing:**
- Load a script, verify header shows script name
- Make changes, verify " *" appears for unsaved changes
- Save script, verify " *" disappears
- Create new script, verify "Untitled Script" appears
- Load script in folder, verify folder path appears

---

## Issue 7: Description Pane Has Scrollbar When Empty

### Problem
**File:** `ScriptMetadataPanel.java:49, 87`

**User quote:** "The description pane in script information has a scroll bar on it when there is no text in it. Please space this out better so that ideally it only needs a scroll bar if there is a long description"

Current code:
```java
descriptionArea = new JTextArea(3, 20);  // Fixed 3 rows
descScroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
```

### Root Cause
JTextArea has fixed minimum rows (3), and JScrollPane calculates preferred size based on content, but the fixed row height may exceed available space, causing scrollbar to appear even when empty.

### Solution

**Implementation (1 hour):**

```java
// ScriptMetadataPanel.java

public ScriptMetadataPanel() {
    setLayout(new BorderLayout(5, 5));
    setBorder(BorderFactory.createCompoundBorder(
            new TitledBorder(BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT),
                    "Script Information",
                    TitledBorder.DEFAULT_JUSTIFICATION,
                    TitledBorder.DEFAULT_POSITION,
                    ModernTheme.FONT_REGULAR,
                    ModernTheme.FOREGROUND_PRIMARY),
            BorderFactory.createEmptyBorder(5, 5, 5, 5)
    ));
    setPreferredSize(new Dimension(250, 220));  // Increased from 180 to 220
    setBackground(ModernTheme.PANEL_BACKGROUND);

    // Create labels
    // ... existing label creation ...

    // Description text area - REMOVE FIXED ROWS
    descriptionArea = new JTextArea();  // No fixed rows
    descriptionArea.setEditable(false);
    descriptionArea.setLineWrap(true);
    descriptionArea.setWrapStyleWord(true);
    descriptionArea.setFont(ModernTheme.withSize(ModernTheme.FONT_REGULAR, 11));
    descriptionArea.setBackground(ModernTheme.BACKGROUND_DARKER);
    descriptionArea.setForeground(ModernTheme.FOREGROUND_PRIMARY);
    descriptionArea.setCaretColor(ModernTheme.FOREGROUND_PRIMARY);

    // Set minimum size to prevent collapse
    descriptionArea.setMinimumSize(new Dimension(200, 40));
    descriptionArea.setPreferredSize(new Dimension(200, 60));

    // Layout
    JPanel fieldsPanel = new JPanel(new GridLayout(5, 2, 5, 3));
    fieldsPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
    fieldsPanel.setBackground(ModernTheme.PANEL_BACKGROUND);

    fieldsPanel.add(createKeyLabel("Name:"));
    fieldsPanel.add(nameLabel);
    fieldsPanel.add(createKeyLabel("Author:"));
    fieldsPanel.add(authorLabel);
    fieldsPanel.add(createKeyLabel("Created:"));
    fieldsPanel.add(createdLabel);
    fieldsPanel.add(createKeyLabel("Modified:"));
    fieldsPanel.add(modifiedLabel);
    fieldsPanel.add(createKeyLabel("Version:"));
    fieldsPanel.add(versionLabel);

    add(fieldsPanel, BorderLayout.NORTH);

    // Description section with better spacing
    JPanel descPanel = new JPanel(new BorderLayout(3, 3));
    descPanel.setBorder(new EmptyBorder(5, 5, 5, 5));  // More padding
    descPanel.setBackground(ModernTheme.PANEL_BACKGROUND);

    JLabel descLabel = createKeyLabel("Description:");
    descLabel.setBorder(new EmptyBorder(0, 0, 3, 0));  // Space below label
    descPanel.add(descLabel, BorderLayout.NORTH);

    // Scroll pane with smart scrollbar policy
    JScrollPane descScroll = new JScrollPane(descriptionArea);
    descScroll.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED);
    descScroll.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    descScroll.setBackground(ModernTheme.BACKGROUND_DARKER);
    descScroll.getViewport().setBackground(ModernTheme.BACKGROUND_DARKER);
    descScroll.setBorder(BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT));

    // Ensure scroll pane doesn't show scrollbar when content fits
    descScroll.setPreferredSize(new Dimension(240, 70));
    descScroll.setMinimumSize(new Dimension(240, 50));

    descPanel.add(descScroll, BorderLayout.CENTER);

    add(descPanel, BorderLayout.CENTER);

    // Initially show "No script selected"
    clear();
}

/**
 * Displays metadata for a script.
 */
public void displayMetadata(ScriptMetadata metadata) {
    if (metadata == null) {
        clear();
        return;
    }

    nameLabel.setText(metadata.getName());
    authorLabel.setText(metadata.getAuthor() != null ? metadata.getAuthor() : "Unknown");
    createdLabel.setText(formatDate(metadata.getCreatedDate()));
    modifiedLabel.setText(formatDate(metadata.getLastModified()));
    versionLabel.setText(metadata.getVersion() != null ? metadata.getVersion() : "1.0");

    String description = metadata.getDescription() != null ? metadata.getDescription() : "";
    descriptionArea.setText(description);

    // Scroll to top when displaying new metadata
    descriptionArea.setCaretPosition(0);
}
```

**Testing:**
- Select script with no description, verify no scrollbar appears
- Select script with short description (1-2 lines), verify no scrollbar
- Select script with long description (>5 lines), verify scrollbar appears
- Verify scrollbar disappears when switching to short description
- Test resizing sidebar, verify scrollbar behavior adapts

---

## Issue 8: Button Sizes Inconsistent, Not Aligned

### Problem
**User quote:** "The buttons above the python code editor are quite large, they could be made the same size as the Folder, Script and Refresh buttons above the script browser and it would be nice if they were all aligned - the same can be changed for the Connect button and that whole panel could be smaller vertically"

Current issues:
- Toolbar buttons (Execute, Clear, Save, etc.) are larger than tree toolbar buttons (Folder, Script, Refresh)
- Connect button panel takes up too much vertical space
- Buttons are not aligned consistently

### Root Cause
- Different button creation methods (ModernButton.createPrimary vs ModernButton.createSmall)
- Different font sizes and padding
- Panels have inconsistent heights

### Solution

**Implementation (1-2 hours):**

```java
// Python3IDE_v1_9.java

private void initComponents() {
    // ...

    // Gateway connection - smaller button
    connectButton = ModernButton.createSmall("Connect");
    connectButton.setPreferredSize(new Dimension(80, 24));

    // Code editor toolbar buttons - uniform small size
    executeButton = ModernButton.createSmall("Execute");
    executeButton.setIcon(createExecuteIcon());  // Optional icon
    executeButton.setToolTipText("Execute Python code (Ctrl+Enter)");
    executeButton.setPreferredSize(new Dimension(80, 24));

    clearButton = ModernButton.createSmall("Clear");
    clearButton.setToolTipText("Clear output and errors");
    clearButton.setPreferredSize(new Dimension(70, 24));

    saveButton = ModernButton.createSmall("Save");
    saveButton.setIcon(createSaveIcon());  // Optional icon
    saveButton.setToolTipText("Save current script (Ctrl+S)");
    saveButton.setPreferredSize(new Dimension(70, 24));

    saveAsButton = ModernButton.createSmall("Save As");
    saveAsButton.setPreferredSize(new Dimension(75, 24));

    importButton = ModernButton.createSmall("Import");
    importButton.setPreferredSize(new Dimension(70, 24));

    exportButton = ModernButton.createSmall("Export");
    exportButton.setPreferredSize(new Dimension(70, 24));

    // Progress bar - match button height
    progressBar = new JProgressBar();
    progressBar.setIndeterminate(false);
    progressBar.setVisible(false);
    progressBar.setPreferredSize(new Dimension(100, 24));
}

private void layoutComponents() {
    setLayout(new BorderLayout(5, 5));
    setBorder(new EmptyBorder(8, 8, 8, 8));  // Reduced from 10 to 8
    setBackground(ModernTheme.BACKGROUND_DARK);

    // Top area: Gateway Connection - MORE COMPACT
    JPanel gatewayPanel = new JPanel(new BorderLayout(10, 0));
    gatewayPanel.setBackground(ModernTheme.PANEL_BACKGROUND);
    gatewayPanel.setBorder(BorderFactory.createCompoundBorder(
            new TitledBorder(BorderFactory.createLineBorder(ModernTheme.BORDER_DEFAULT),
                    "Gateway Connection",
                    TitledBorder.DEFAULT_JUSTIFICATION,
                    TitledBorder.DEFAULT_POSITION,
                    ModernTheme.FONT_REGULAR,
                    ModernTheme.FOREGROUND_PRIMARY),
            BorderFactory.createEmptyBorder(3, 5, 3, 5)  // Reduced padding
    ));
    gatewayPanel.setPreferredSize(new Dimension(0, 55));  // Reduced from ~70 to 55
    gatewayPanel.setMaximumSize(new Dimension(Integer.MAX_VALUE, 55));

    // Left side: URL and Connect button - tighter layout
    JPanel leftPanel = new JPanel(new FlowLayout(FlowLayout.LEFT, 8, 3));  // Reduced gaps
    leftPanel.setBackground(ModernTheme.PANEL_BACKGROUND);
    JLabel urlLabel = new JLabel("URL:");
    urlLabel.setForeground(ModernTheme.FOREGROUND_PRIMARY);
    urlLabel.setFont(ModernTheme.withSize(ModernTheme.FONT_REGULAR, 11));
    leftPanel.add(urlLabel);
    leftPanel.add(gatewayUrlField);
    leftPanel.add(connectButton);
    gatewayPanel.add(leftPanel, BorderLayout.WEST);

    // Right side: Theme selector
    JPanel rightPanel = new JPanel(new FlowLayout(FlowLayout.RIGHT, 8, 3));  // Reduced gaps
    rightPanel.setBackground(ModernTheme.PANEL_BACKGROUND);
    JLabel themeLabel = new JLabel("Theme:");
    themeLabel.setForeground(ModernTheme.FOREGROUND_PRIMARY);
    themeLabel.setFont(ModernTheme.withSize(ModernTheme.FONT_REGULAR, 11));
    rightPanel.add(themeLabel);
    rightPanel.add(themeSelector);
    gatewayPanel.add(rightPanel, BorderLayout.EAST);

    add(gatewayPanel, BorderLayout.NORTH);

    // ... rest of layout ...
}

private JPanel createSidebar() {
    // ...

    // Toolbar above tree - ALREADY SMALL BUTTONS
    JPanel treeToolbar = new JPanel(new FlowLayout(FlowLayout.LEFT, 3, 2));
    treeToolbar.setBackground(ModernTheme.PANEL_BACKGROUND);
    treeToolbar.setPreferredSize(new Dimension(0, 28));  // Fixed height to match editor toolbar

    ModernButton newFolderBtn = ModernButton.createSmall("Folder");
    newFolderBtn.setPreferredSize(new Dimension(60, 24));
    newFolderBtn.setToolTipText("New Folder");
    newFolderBtn.addActionListener(e -> createNewFolder());

    ModernButton newScriptBtn = ModernButton.createSmall("Script");
    newScriptBtn.setPreferredSize(new Dimension(60, 24));
    newScriptBtn.setToolTipText("New Script");
    newScriptBtn.addActionListener(e -> createNewScript());

    ModernButton refreshBtn = ModernButton.createSmall("Refresh");
    refreshBtn.setPreferredSize(new Dimension(65, 24));
    refreshBtn.setToolTipText("Refresh Scripts");
    refreshBtn.addActionListener(e -> refreshScriptTree());

    treeToolbar.add(newFolderBtn);
    treeToolbar.add(newScriptBtn);
    treeToolbar.add(refreshBtn);

    // ...
}

private JPanel createEditorPanel() {
    // ...

    // Toolbar - COMPACT AND ALIGNED
    JPanel toolbar = new JPanel(new FlowLayout(FlowLayout.LEFT, 3, 2));  // Match tree toolbar
    toolbar.setBackground(ModernTheme.PANEL_BACKGROUND);
    toolbar.setPreferredSize(new Dimension(0, 28));  // Match tree toolbar height
    toolbar.add(executeButton);
    toolbar.add(clearButton);
    toolbar.add(saveButton);
    toolbar.add(saveAsButton);
    toolbar.add(importButton);
    toolbar.add(exportButton);
    toolbar.add(progressBar);

    panel.add(toolbar, BorderLayout.NORTH);

    // ...
}

// Optional: Create small icons for buttons
private static Icon createExecuteIcon() {
    return new Icon() {
        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            Graphics2D g2 = (Graphics2D) g;
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            // Draw play triangle
            g2.setColor(Color.WHITE);
            int[] xPoints = {x + 3, x + 10, x + 3};
            int[] yPoints = {y + 2, y + 6, y + 10};
            g2.fillPolygon(xPoints, yPoints, 3);
        }

        @Override
        public int getIconWidth() {
            return 12;
        }

        @Override
        public int getIconHeight() {
            return 12;
        }
    };
}

private static Icon createSaveIcon() {
    return new Icon() {
        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            Graphics2D g2 = (Graphics2D) g;
            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

            // Draw floppy disk icon
            g2.setColor(Color.WHITE);
            g2.fillRect(x + 2, y + 2, 8, 9);
            g2.setColor(new Color(100, 100, 100));
            g2.drawRect(x + 2, y + 2, 8, 9);
            g2.fillRect(x + 3, y + 3, 6, 3);  // Label area
        }

        @Override
        public int getIconWidth() {
            return 12;
        }

        @Override
        public int getIconHeight() {
            return 12;
        }
    };
}
```

**Testing:**
- Verify all buttons have consistent height (24px)
- Verify tree toolbar and editor toolbar are aligned horizontally
- Verify Gateway Connection panel is more compact (~55px height)
- Verify all buttons have consistent spacing (3px gaps)
- Verify button text is not truncated
- Test with different screen resolutions

---

## Implementation Priority

### Phase 1 (Quick Wins - 2-3 hours)
1. ✅ Issue 1: Update version header (30 min)
2. ✅ Issue 7: Fix description pane scrollbar (1 hour)
3. ✅ Issue 5: Fix button text truncation (1 hour)

### Phase 2 (Alignment and Polish - 3-4 hours)
4. ✅ Issue 8: Standardize button sizes and alignment (1-2 hours)
5. ✅ Issue 6: Add selected script indicator (1-2 hours)

### Phase 3 (Theme and Visuals - 3-5 hours)
6. ✅ Issue 3: Fix scrollbar theming (1-2 hours)
7. ✅ Issue 2: Redesign script browser tree (4-6 hours) - MOST EFFORT

### Phase 4 (New Features - 3-4 hours)
8. ✅ Issue 4: Add diagnostics panel (3-4 hours)

**Total Estimated Time:** 16-24 hours

---

## Testing Checklist

After implementing all fixes, perform comprehensive testing:

### Visual Testing
- [ ] Window title shows correct version (v1.15.0)
- [ ] Script browser tree looks professional (matches Tag Browser style)
- [ ] Dark theme scrollbars are dark colored
- [ ] Light theme scrollbars are light colored
- [ ] All button text is fully visible (no truncation)
- [ ] Buttons are uniform size and aligned
- [ ] Current script name appears in editor header
- [ ] Description pane only shows scrollbar when needed
- [ ] Diagnostics panel displays metrics

### Functional Testing
- [ ] Load script → verify script name appears in header
- [ ] Make changes → verify " *" appears for unsaved changes
- [ ] Execute code → verify diagnostics update
- [ ] Switch themes → verify all UI elements update correctly
- [ ] Create new folder → verify tree updates
- [ ] Create new script → verify "Untitled" appears in header
- [ ] Drag and drop scripts → verify tree updates

### Performance Testing
- [ ] Diagnostics refresh every 5 seconds without lag
- [ ] Scrollbar theme updates don't cause flicker
- [ ] Tree rendering is smooth with 50+ scripts
- [ ] Button clicks are responsive

---

## Success Criteria

1. ✅ All 8 UI issues are resolved
2. ✅ User feedback confirms professional appearance
3. ✅ IDE matches Ignition's native UI design language
4. ✅ No new bugs introduced
5. ✅ Performance is smooth (60fps UI rendering)
6. ✅ Code is clean, well-documented, and maintainable

---

**Document Version:** 1.0
**Author:** Claude Code
**Next Review:** After user testing of v1.15.0
